{% extends 'layout_form_base.html' %}
{% load static %}

{% block title %}Detalle del Cliente - ZuluAris CRM{% endblock %}

{% block content %}
{% with titulo="Información del Cliente" descripcion="Consulta, edita o elimina los datos del cliente registrado." %}
{{ block.super }}
{% endwith %}
{% endblock %}

{% block form_fields %}
<!-- Información del cliente -->
<div class="grupo-doble">
    <div class="form-group">
        <label for="nombre">Nombre completo</label>
        <input type="text" name="nombre" id="nombre" value="{{ cliente.nombre }}" readonly style="background-color: #e7e9eaff;">
    </div>

    <div class="form-group">
        <label for="dni">Documento</label>
        <input type="text" name="dni" id="dni" value="{{ cliente.dni }}" readonly style="background-color: #e7e9eaff;">
    </div>
</div>

<div class="grupo-doble">
    <div class="form-group">
        <label for="tipo_dni">Tipo de documento</label>
        <select name="tipo_dni" id="tipo_dni" required>
            {% for tipo in tipos_dni %}
                <option value="{{ tipo.id }}" {% if cliente.id_tipo_dni.id == tipo.id %}selected{% endif %}>{{ tipo.nombre }}</option>
            {% endfor %}
        </select>
    </div>

    <div class="form-group">
        <label for="telefono">Teléfono / Celular</label>
        <input type="text" name="telefono" id="telefono" value="{{ cliente.celular }}">
    </div>
</div>

<div class="grupo-doble">
    <div class="form-group">
        <label for="correo">Correo electrónico</label>
        <input type="email" name="correo" id="correo" value="{{ cliente.correo|default:'' }}">
    </div>

    <div class="form-group">
        <label for="direccion">Dirección</label>
        <input type="text" name="direccion" id="direccion" value="{{ cliente.direccion|default:'' }}">
    </div>
</div>

<div class="grupo-doble">
    <div class="form-group">
        <label for="departamento">Departamento</label>
        <select name="departamento" id="departamento">
            {% for dep in departamentos %}
                <option value="{{ dep.id }}" {% if cliente.id_ciudad.id_departamento.id == dep.id %}selected{% endif %}>{{ dep.descripcion }}</option>
            {% endfor %}
        </select>
    </div>

    <div class="form-group">
        <label for="ciudad">Ciudad</label>
        <select name="ciudad" id="ciudad">
            {% for c in ciudades %}
                <option value="{{ c.id }}" {% if cliente.id_ciudad.id == c.id %}selected{% endif %}>{{ c.descripcion }}</option>
            {% endfor %}
        </select>
    </div>
</div>
{% endblock %}

{% block form_actions %}
<button type="submit" class="btn-guardar">Guardar </button>
<a href="{% url 'consultar_clientes' %}" class="btn-cancelar">Cancelar</a>

<form method="POST" action="{% url 'eliminar_cliente' cliente.dni %}" 
      onsubmit="return confirm('¿Estás seguro de eliminar este cliente?')" 
      class="form-eliminar">
    {% csrf_token %}
    <button type="submit" class="btn-eliminar">Eliminar cliente</button>
</form>
{% endblock %}

{% block extra_scripts %}
<script src="{% static 'js/dependencias.js' %}"></script>
{% endblock %}
