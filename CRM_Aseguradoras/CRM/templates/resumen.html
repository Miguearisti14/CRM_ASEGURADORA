{% extends "layout_panel.html" %}

{% block content %}
<div class="dashboard">

    <p>Empresa actual: <strong>{{ empresa.nombre }}</strong></p>

    <h1 class="dashboard-title">Resumen general</h1>
    <p class="dashboard-subtitle">Visualiza el estado actual de tu empresa y las métricas más relevantes.</p>

    <div class="cards-container">
        <div class="card">
            <h2>Clientes Activos</h2>
            <p class="card-number">{{ clientes_count }}</p>
            <span class="card-detail">Registrados en el sistema</span>
        </div>

        <div class="card">
            <h2>Reclamos Pendientes</h2>
            <p class="card-number">{{ reclamos_pendientes }}</p>
            <span class="card-detail warning">Actualizado al {{ now|date:"d/m/Y" }}</span>
        </div>

        <div class="card">
            <h2>Pólizas Vigentes</h2>
            <p class="card-number">{{ polizas_vigentes }}</p>
            <span class="card-detail">Con fecha de vencimiento futura</span>
        </div>

        <div class="card">
            <h2>Ingresos del Mes</h2>
            <p class="card-number">${{ ingresos_mes|floatformat:0 }}</p>
            <span class="card-detail success">+9% respecto al mes pasado</span>
        </div>
    </div>

    <div class="data-section">
        <div class="data-card">
            <h2>Actividad Reciente</h2>
            <table>
                <thead>
                    <tr>
                        <th>Fecha</th>
                        <th>Usuario</th>
                        <th>Acción</th>
                        <th>Detalle</th>
                    </tr>
                </thead>
                <tbody>
                    {% for item in actividad_reciente %}
                    <tr>
                        <td>{{ item.fecha }}</td>
                        <td>{{ item.usuario }}</td>
                        <td>{{ item.accion }}</td>
                        <td>{{ item.detalle }}</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>

        <div class="data-card">
            <h2>Recordatorios</h2>
            <ul class="reminders">
                <li>🔹 Reunión semanal - 9:00 AM</li>
                <li>🔹 Revisar reclamos nuevos</li>
                <li>🔹 Enviar reporte financiero</li>
                <li>🔹 Validar actualizaciones de pólizas</li>
            </ul>
        </div>
    </div>
</div>
{% endblock %}
